<lccdd>

  <comment> Central Barrel Vertex Detector </comment>        

  <define>
    <constant name="cb_VTX_Barrel_rmin"   value="VertexTrackerInnerRadius"/>
    <constant name="cb_VTX_Barrel_rmax"   value="VertexTrackerOuterRadius"/>
    <constant name="cb_VTX_Barrel_length" value="VertexTrackerOuterBarrelLength"/>

    <constant name="cb_VTX_Barrel_x_pos"   value="0.0*mm"/>
    <constant name="cb_VTX_Barrel_y_pos"   value="0.0*mm"/>
    <constant name="cb_VTX_Barrel_z_pos"   value="0.0*mm"/>

    <constant name="cb_VTX_Barrel_layer"   value="6"/>

    <comment> Need to cleanup and be more consistent with naming here </comment>

    <constant name="VertexTrackerBarrelLength" value="400.0*mm"/>

    <constant name="SiVertexEndcapP_rmin" value="VertexTrackerInnerRadius"/>
    <constant name="SiVertexEndcapP_rmax" value="VertexTrackerOuterRadius"/>
    <constant name="SiVertexEndcapP_zmin" value="VertexTrackerBarrelLength + 5*mm"/>

    <constant name="SiVertexEndcapN_rmin" value="VertexTrackerInnerRadius"/>
    <constant name="SiVertexEndcapN_rmax" value="VertexTrackerOuterRadius"/>
    <constant name="SiVertexEndcapN_zmin" value="VertexTrackerBarrelLength + 5*mm"/>

    <constant name="SiVertexEndcap_NLayers" value="5"/>
    <constant name="SiVertexEndcapP_zmax" value="VertexTrackingRegion_length/2 - SiVertexEndcapN_zmin"/>
    <constant name="SiVertexEndcapP_zmax" value="VertexTrackingRegion_length/2 - SiVertexEndcapN_zmin"/>
    <constant name="SiVertexEndcap_delta" value="(SiVertexEndcapP_zmax - SiVertexEndcapP_zmin)/SiVertexEndcap_NLayers"/>
  </define>

  <limits>
  </limits>

  <regions>
  </regions>

  <display>
  </display>

  <detectors>

    <detector id="SiVertexSubAssembly_ID" 
      name="SiVertexSubAssembly" 
      type="DD4hep_SubdetectorAssembly" 
      vis="SiTrackerSubAssemblyVis">
      <composite name="SiVertexEndcapN"/>
      <composite name="SiVertexEndcapP"/> 
      <composite name="cb_VTX_Barrel"/>
    </detector>

    <detector id="cb_VTX_Barrel_ID" name="cb_VTX_Barrel" type="cb_VTX_Barrel" readout="cb_VTX_Barrel_Hits" vis="cb_VTX_BarrelVis" insideTrackingVloume="true">
      <dimensions rmin="cb_VTX_Barrel_rmin" rmax="cb_VTX_Barrel_rmax" length="cb_VTX_Barrel_length"/>
      <position x="cb_VTX_Barrel_x_pos" y="cb_VTX_Barrel_y_pos" z="cb_VTX_Barrel_z_pos"/>
      <layer repeat="cb_VTX_Barrel_layer" vis="cb_VTX_Barrel_layerVis">
	<slice name="Silicon_slice" material="Si" sensitive="true"/>
      </layer>
    </detector>

    <detector id="SiVertexEndcapP_ID" name="SiVertexEndcapP" type="ref_DiskTracker"
      insideTrackingVolume="true" reflect="false" vis="Argonne_Red">
      <position x="0" y="0" z="0"/>
      <layer id="1" vis="Argonne_Orange"
        inner_z="SiVertexEndcapP_zmin + 0*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapP_rmin" 
        outer_r="SiVertexEndcapP_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
      <layer id="2" vis="Argonne_Orange"
        inner_z="SiVertexEndcapP_zmin + 1*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapP_rmin" 
        outer_r="SiVertexEndcapP_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
      <layer id="3" vis="Argonne_Orange"
        inner_z="SiVertexEndcapP_zmin + 2*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapP_rmin" 
        outer_r="SiVertexEndcapP_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
      <layer id="4" vis="Argonne_Orange"
        inner_z="SiVertexEndcapP_zmin + 3*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapP_rmin" 
        outer_r="SiVertexEndcapP_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
      <layer id="5" vis="Argonne_Orange"
        inner_z="SiVertexEndcapP_zmin + 4*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapP_rmin" 
        outer_r="SiVertexEndcapP_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
    </detector>

    <detector id="SiVertexEndcapN_ID" name="SiVertexEndcapN" type="ref_DiskTracker"
      insideTrackingVolume="true" reflect="true" vis="Argonne_Red">
      <position x="0" y="0" z="0"/>
      <layer id="1" vis="Argonne_Orange"
        inner_z="SiVertexEndcapN_zmin + 0*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapN_rmin" 
        outer_r="SiVertexEndcapN_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
      <layer id="2" vis="Argonne_Orange"
        inner_z="SiVertexEndcapN_zmin + 1*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapN_rmin" 
        outer_r="SiVertexEndcapN_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
      <layer id="3" vis="Argonne_Orange"
        inner_z="SiVertexEndcapN_zmin + 2*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapN_rmin" 
        outer_r="SiVertexEndcapN_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
      <layer id="4" vis="Argonne_Orange"
        inner_z="SiVertexEndcapN_zmin + 3*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapN_rmin" 
        outer_r="SiVertexEndcapN_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
      <layer id="5" vis="Argonne_Orange"
        inner_z="SiVertexEndcapN_zmin + 4*SiVertexEndcap_delta" 
        inner_r="SiVertexEndcapN_rmin" 
        outer_r="SiVertexEndcapN_rmax">
        <slice material="Air" thickness="1.0*mm" vis="Argonne_Orange" />
      </layer>
    </detector>
  </detectors>

  <readouts>
    <readout name="cb_VTX_Barrel_Hits">
      <segmentation type="CartesianGridXY" grid_size_x="1.0*mm" grid_size_y="1.0*mm" />
      <id>system:8,barrel:3,layer:4,module:8,x:32:-16,y:-16</id>  
    </readout>
  </readouts>

  <plugins>
  </plugins>

  <fields>
  </fields>
</lccdd>
