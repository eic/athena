<?xml version="1.0" encoding="UTF-8"?>
<lccdd>
  <define>
    <comment>
      --------------------------
      Forward and backward TOF Parameters
      --------------------------
    </comment>
    
    <constant name="TOFSensor_thickness"         value="0.03*mm"/>
    <constant name="TOFEndcap_thickness"        value="0.25/100*9.37*cm"/>
    <constant name="TOFEndcapService_thickness" value="TOFEndcap_thickness-TOFSensor_thickness"/>

    <constant name="TOFEndcap_nLayers"          value="2"/>

    <constant name="TOFEndcap_zmin"        value="0*cm"/>
    <constant name="TOFEndcap_zmax"        value="TOFEndcap_zmin + 10*cm"/>
    <constant name="TOFEndcap_length"        value="TOFEndcap_zmax- TOFEndcap_zmin"/>
    <constant name="TOFEndcapLayer_dz"        value="TOFEndcap_length/TOFEndcap_nLayers"/>

    <constant name="TOFEndcap_rmin1" value="3.18*cm + 1.2*cm * 0"/>
    <constant name="TOFEndcap_rmin2" value="3.18*cm + 1.2*cm * 1"/>

    <constant name="TOFEndcap_rmax1"  value="43.23*cm"/>
    <constant name="TOFEndcap_rmax2"  value="43.23*cm"/>
    
    <constant name="TOFEndcapModOpeningAngle" value="30.0*degree"/>
    <constant name="TOFEndcapMod1_x1"            value="2.0*TOFEndcap_rmin1*sin(TOFEndcapModOpeningAngle/2.0)"/>
    <constant name="TOFEndcapMod1_x2"            value="2.0*TOFEndcap_rmax1*sin(TOFEndcapModOpeningAngle/2.0)"/>
    <constant name="TOFEndcapMod1_y"             value="TOFEndcap_rmax1*cos(TOFEndcapModOpeningAngle/2.0) - TOFEndcap_rmin1"/>
    <constant name="TOFEndcapMod2_x1"            value="2.0*TOFEndcap_rmin2*sin(TOFEndcapModOpeningAngle/2.0)"/>
    <constant name="TOFEndcapMod2_x2"            value="2.0*TOFEndcap_rmax2*sin(TOFEndcapModOpeningAngle/2.0)"/>
    <constant name="TOFEndcapMod2_y"             value="TOFEndcap_rmax2*cos(TOFEndcapModOpeningAngle/2.0) - TOFEndcap_rmin2"/>
    
    <constant name="ForwardTOF_zmin" value="BarrelTracking_length/2.0 + ForwardTracking_length + ForwardRICH_length + ForwardTRD_length"/>
    <constant name="ForwardTOF_rmin" value="ForwardPID_rmin1"/>
    <constant name="ForwardTOF_rmax" value="Solenoid_rmin"/>
    <constant name="BackwardTOF_zmin" value="BarrelTracking_length/2.0 + BackwardTracking_length + BackwardCherenkov_length "/>
    <constant name="BackwardTOF_rmin" value="ForwardPID_rmin1"/>
    <constant name="BackwardTOF_rmax" value="BarrelTracking_rmax"/>
  </define>

  <detectors>
      
      <detector
        id="ForwardTOF_ID"
        name="ForwardTOF"
        type="ref_DiskTracker"
        insideTrackingVolume="true"
        vis="AnlRed"
        reflect="false">
        <module name="Module1" vis="AnlProcess_Blue">
          <trd x1="TOFEndcapMod1_x1/2.0" x2="TOFEndcapMod1_x2/2.0" z="TOFEndcapMod1_y/2"/>
          <module_component thickness="ITS3Thickness" material="Silicon" sensitive="true"/>
          <module_component thickness="0.25/100*9.37*cm-ITS3Thickness" material="Silicon"/>
        </module>
        <module name="Module2" vis="AnlProcess_Blue">
          <trd x1="TOFEndcapMod2_x1/2.0" x2="TOFEndcapMod2_x2/2.0" z="TOFEndcapMod2_y/2"/>
          <module_component thickness="ITS3Thickness" material="Silicon" sensitive="true"/>
          <module_component thickness="0.25/100*9.37*cm-ITS3Thickness" material="Silicon"/>
        </module>
        <layer id="1">
          <envelope  vis="AnlRed"
            rmin="TOFEndcap_rmin1"
            rmax="TOFEndcap_rmax1"
            length="TOFEndcapLayer_dz"
            zstart="ForwardTOF_zmin" />
          <ring vis="AnlRed"
            r="TOFEndcap_rmin1+TOFEndcapMod1_y/2.0"
            zstart="0.0*mm"
            nmodules="12" dz="2.5 * mm" module="Module1" />
        </layer>
        <layer id="2">
          <envelope  vis="AnlRed"
            rmin="TOFEndcap_rmin2"
            rmax="TOFEndcap_rmax2"
            length="TOFEndcapLayer_dz"
            zstart="ForwardTOF_zmin + TOFEndcapLayer_dz" />
          <ring vis="AnlRed"
            r="TOFEndcap_rmin2+TOFEndcapMod2_y/2.0"
            zstart="0.0*mm"
            nmodules="12" dz="2.5 * mm" module="Module2" />
        </layer>
      </detector>

      <detector
        id="BackwardTOF_ID"
        name="BackwardTOF"
        type="ref_DiskTracker"
        insideTrackingVolume="true"
        vis="AnlRed"
        reflect="true">
        <module name="Module1" vis="AnlProcess_Blue">
          <trd x1="TOFEndcapMod1_x1/2.0" x2="TOFEndcapMod1_x2/2.0" z="TOFEndcapMod1_y/2"/>
          <module_component thickness="ITS3Thickness" material="Silicon" sensitive="true"/>
          <module_component thickness="0.25/100*9.37*cm-ITS3Thickness" material="Silicon"/>
        </module>
        <module name="Module2" vis="AnlProcess_Blue">
          <trd x1="TOFEndcapMod2_x1/2.0" x2="TOFEndcapMod2_x2/2.0" z="TOFEndcapMod2_y/2"/>
          <module_component thickness="ITS3Thickness" material="Silicon" sensitive="true"/>
          <module_component thickness="0.25/100*9.37*cm-ITS3Thickness" material="Silicon"/>
        </module>
        <layer id="1">
          <envelope  vis="AnlRed"
            rmin="TOFEndcap_rmin1 + 0 * 1.2*cm"
            rmax="TOFEndcap_rmax1"
            length="TOFEndcapLayer_dz"
            zstart="BackwardTOF_zmin" />
          <ring vis="AnlRed"
            r="TOFEndcap_rmin1+TOFEndcapMod1_y/2.0"
            zstart="0.0*mm"
            nmodules="12" dz="2.5 * mm" module="Module1" />
        </layer>
        <layer id="2">
          <envelope  vis="AnlRed"
            rmin="TOFEndcap_rmin2"
            rmax="TOFEndcap_rmax2"
            length="TOFEndcapLayer_dz"
            zstart="BackwardTOF_zmin + TOFEndcapLayer_dz" />
          <ring vis="AnlRed"
            r="TOFEndcap_rmin2+TOFEndcapMod2_y/2.0"
            zstart="0.0*mm"
            nmodules="12" dz="2.5 * mm" module="Module2" />
        </layer>
      </detector>
      
      <!--
    <detector 
      id="ForwardTOF_ID"
      name="ForwardTOF"
      type="ref_DiskTracker"
      insideTrackingVolume="true"
      reflect="false"
      vis="AnlOrange">
      <position x="0" y="0" z="0.0"/>
      <layer id="1" 
        vis="AnlOrange"
        inner_z="ForwardTOF_zmin" 
        inner_r="ForwardTOF_rmin" 
        _r="ForwardTOF_rmax">
        <slice material="Air" thickness="ForwardTOF_length/2.0" vis="AnlOrange" />
      </layer>
    </detector>

    <detector 
      id="BackwardTOF_ID"
      name="BackwardTOF"
      type="ref_DiskTracker"
      insideTrackingVolume="true"
      reflect="true"
      vis="AnlOrange">
      <position x="0" y="0" z="0.0"/>
      <layer id="1" 
        vis="AnlOrange"
        inner_z="BackwardTOF_zmin" 
        inner_r="BackwardTOF_rmin" 
        _r="BackwardTOF_rmax">
        <slice material="Air" thickness="BackwardTOF_length/2.0" vis="AnlOrange" />
      </layer>
    </detector>-->

  </detectors>

</lccdd>
